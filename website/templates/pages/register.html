{% extends 'pages/base.html' %}

{% load ui_icons %}

{% block title %}Register · CRUD{% endblock %}

{% block content %}
  <section class="grid gap-10 rounded-3xl border border-white/10 bg-white/5 px-6 py-8 text-slate-200 shadow-[0_60px_120px_-60px_rgba(29,78,216,0.55)] backdrop-blur lg:grid-cols-[minmax(0,1.1fr)_minmax(0,0.9fr)]">
    <div class="relative overflow-hidden rounded-3xl border border-white/10 bg-slate-900/70 p-8">
      <div class="pointer-events-none absolute inset-0">
        <div class="absolute -left-24 top-0 h-60 w-60 rounded-full bg-sky-500/25 blur-3xl"></div>
        <div class="absolute bottom-0 right-0 h-60 w-60 rounded-full bg-violet-400/25 blur-3xl"></div>
      </div>
      <div class="relative space-y-5">
        <span class="inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.24em] text-white/70">{% icon 'sparkles' classes='h-4 w-4' %} Get started free</span>
        <h2 class="text-3xl font-semibold text-white">Create your account</h2>
        <p class="text-sm text-slate-200/80">Unlock the dashboard, collaborate with your team, and track records effortlessly.</p>
        <ul class="space-y-3 text-sm text-slate-200/80">
          <li class="flex items-start gap-3 text-sky-200">{% icon 'check' classes='h-4 w-4' %} <span class="text-slate-200">Secure authentication</span></li>
          <li class="flex items-start gap-3 text-sky-200">{% icon 'check' classes='h-4 w-4' %} <span class="text-slate-200">Clean, responsive UI</span></li>
          <li class="flex items-start gap-3 text-sky-200">{% icon 'check' classes='h-4 w-4' %} <span class="text-slate-200">Ready to extend</span></li>
        </ul>
      </div>
    </div>

    <div class="rounded-3xl border border-white/10 bg-white/5 p-8 text-slate-200 backdrop-blur">
      <h3 class="text-2xl font-semibold text-white">Register</h3>
      <p class="mt-2 text-sm text-slate-300">Set a username and password to access the workspace.</p>
      <form method="POST" autocomplete="off" novalidate class="mt-6 space-y-5" id="register-form">
        {% csrf_token %}
        {% if form.non_field_errors %}
          <div class="rounded-2xl border border-rose-400/40 bg-rose-500/10 px-4 py-3 text-sm text-rose-200">
            {% for error in form.non_field_errors %}{{ error }}{% if not forloop.last %}<br>{% endif %}{% endfor %}
          </div>
        {% endif %}
        {% for field in form %}
          <div class="space-y-2">
            <label for="{{ field.id_for_label }}" class="text-sm font-semibold text-white/80">{{ field.label }}</label>
            {{ field }}
            {% if field.help_text %}
              <p class="text-xs text-slate-400">{{ field.help_text|safe }}</p>
            {% endif %}
            {% if field.errors %}
              <ul class="space-y-1 text-xs text-rose-300">
                {% for error in field.errors %}<li>{{ error }}</li>{% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
        <div class="rounded-2xl border border-white/10 bg-slate-950/40 px-4 py-3 text-xs text-slate-300">
          <span class="text-[0.65rem] font-semibold uppercase tracking-[0.28em] text-white/60">Pro tips</span>
          <ul class="mt-2 space-y-2">
            <li class="flex items-start gap-2 text-sky-200">{% icon 'sparkles' classes='h-4 w-4' %} <span class="text-slate-200">Use at least 10 characters mixing letters, numbers, and symbols.</span></li>
            <li class="flex items-start gap-2 text-sky-200">{% icon 'lock' classes='h-4 w-4' %} <span class="text-slate-200">Avoid reusing passwords from other tools.</span></li>
            <li class="flex items-start gap-2 text-sky-200">{% icon 'phone' classes='h-4 w-4' %} <span class="text-slate-200">Enable 2FA once inside the dashboard for extra security.</span></li>
          </ul>
        </div>
        <div class="space-y-2">
          <div class="flex items-center justify-between text-xs font-semibold uppercase tracking-[0.24em] text-white/60">
            <span>Password strength</span>
            <span id="pw-label" class="text-white/80">—</span>
          </div>
          <div class="h-2 w-full overflow-hidden rounded-full border border-white/10 bg-slate-900/80">
            <div id="pw-bar" class="h-full w-0 rounded-full bg-sky-400 transition-all"></div>
          </div>
        </div>
        <button type="submit" class="inline-flex w-full items-center justify-center gap-2 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 px-5 py-2.5 text-sm font-semibold text-white shadow-[0_18px_36px_-24px_rgba(59,130,246,0.7)] transition hover:from-sky-400 hover:to-indigo-400">Register</button>
      </form>
      <div class="mt-4 text-center text-sm text-slate-300">
        Already have an account? <a href="{% url 'login' %}" class="text-sky-300 transition hover:text-sky-200">Login</a>
      </div>
      <div class="mt-3 text-center text-xs text-slate-400">
        By signing up you agree to our <a href="{% url 'terms' %}" class="text-sky-300 hover:text-sky-200">terms</a> and <a href="{% url 'privacy' %}" class="text-sky-300 hover:text-sky-200">privacy policy</a>.
      </div>
    </div>
  </section>
  <script>
    (function(){
      const pw = document.getElementById('id_password1');
      const bar = document.getElementById('pw-bar');
      const label = document.getElementById('pw-label');
      if(!pw || !bar || !label) return;
      function strength(s){
        let score = 0;
        if(!s) return 0;
        if(s.length >= 8) score += 25;
        if(/[A-Z]/.test(s)) score += 20;
        if(/[a-z]/.test(s)) score += 20;
        if(/\d/.test(s)) score += 15;
        if(/[^A-Za-z0-9]/.test(s)) score += 20;
        return Math.min(score, 100);
      }
      function labelFor(v){
        if(v < 30) return ['Weak','bg-rose-500'];
        if(v < 60) return ['Fair','bg-amber-400'];
        if(v < 85) return ['Good','bg-sky-400'];
        return ['Strong','bg-emerald-400'];
      }
      function update(){
        const val = pw.value || '';
        const v = strength(val);
        const [text, klass] = labelFor(v);
        bar.style.width = v + '%';
        bar.className = 'h-full rounded-full transition-all ' + klass;
        label.textContent = val ? text : '—';
      }
      pw.addEventListener('input', update);
      update();
    })();
  </script>
{% endblock content %}
